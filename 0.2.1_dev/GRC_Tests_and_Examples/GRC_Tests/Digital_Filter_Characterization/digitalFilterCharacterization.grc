options:
  parameters:
    author: "Francisco Nicol\xE1s P\xE9rez Fern\xE1ndez"
    catch_exceptions: 'True'
    category: '[GRC Hier Blocks]'
    cmake_opt: ''
    comment: ''
    copyright: ''
    description: ''
    gen_cmake: 'On'
    gen_linking: dynamic
    generate_options: qt_gui
    hier_block_src_path: '.:'
    id: digitalFilterCharacterization
    max_nouts: '0'
    output_language: python
    placement: (0,0)
    qt_qss_theme: ''
    realtime_scheduling: ''
    run: 'True'
    run_command: '{python} -u {filename}'
    run_options: run
    sizing_mode: fixed
    thread_safe_setters: ''
    title: Digital Filter Characterization
    window_size: (1000,1000)
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [40, 44.0]
    rotation: 0
    state: enabled

blocks:
- name: bandpass_end_freq3
  id: variable
  parameters:
    comment: ''
    value: 42k
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [712, 252.0]
    rotation: 0
    state: disabled
- name: bandpass_riple3
  id: variable
  parameters:
    comment: ''
    value: '1'
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [880, 308.0]
    rotation: 0
    state: disabled
- name: cutoff_freq1
  id: variable
  parameters:
    comment: ''
    value: 42e3
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [224, 228.0]
    rotation: 0
    state: enabled
- name: cutoff_freq2
  id: variable
  parameters:
    comment: ''
    value: 42e3
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [464, 252.0]
    rotation: 0
    state: enabled
- name: filterGain1
  id: variable
  parameters:
    comment: ''
    value: '1'
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [312, 172.0]
    rotation: 0
    state: enabled
- name: filterGain2
  id: variable
  parameters:
    comment: ''
    value: '1'
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [552, 196.0]
    rotation: 0
    state: enabled
- name: filterGain3
  id: variable
  parameters:
    comment: ''
    value: '1'
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [800, 196.0]
    rotation: 0
    state: disabled
- name: plotphase
  id: variable
  parameters:
    comment: Set to True to plot the phase
    value: 'False'
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [576, 52.0]
    rotation: 0
    state: true
- name: samp_rate1
  id: variable
  parameters:
    comment: ''
    value: 13e6
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [224, 172.0]
    rotation: 0
    state: enabled
- name: samp_rate2
  id: variable
  parameters:
    comment: ''
    value: 13e6
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [464, 196.0]
    rotation: 0
    state: enabled
- name: samp_rate3
  id: variable
  parameters:
    comment: ''
    value: 13e6
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [712, 196.0]
    rotation: 0
    state: disabled
- name: stop_band_attenuation_dB2
  id: variable
  parameters:
    comment: ''
    value: '96'
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [464, 308.0]
    rotation: 0
    state: enabled
- name: stop_band_attenuation_dB3
  id: variable
  parameters:
    comment: ''
    value: '96'
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [712, 308.0]
    rotation: 0
    state: disabled
- name: stopband_start_freq3
  id: variable
  parameters:
    comment: ''
    value: 90k
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [848, 252.0]
    rotation: 0
    state: disabled
- name: taps1
  id: variable_low_pass_filter_taps
  parameters:
    beta: '6.76'
    comment: firdes.low_pass() taps generator
    cutoff_freq: cutoff_freq1
    gain: filterGain1
    samp_rate: samp_rate1
    width: transition_width1
    win: window.WIN_HAMMING
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [224, 284.0]
    rotation: 0
    state: enabled
- name: taps2
  id: variable
  parameters:
    comment: firdes.low_pass_2 taps generator
    value: firdes.low_pass_2(filterGain2,samp_rate2,cutoff_freq2,transition_width2,stop_band_attenuation_dB2)
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [464, 364.0]
    rotation: 0
    state: true
- name: taps3
  id: variable
  parameters:
    comment: filter.optfir.low_pass taps generator
    value: optfir.low_pass(filterGain3,samp_rate3,bandpass_end_freq3,stopband_start_freq3,bandpass_riple3,stop_band_attenuation_dB)
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [712, 364.0]
    rotation: 0
    state: disabled
- name: transition_width1
  id: variable
  parameters:
    comment: ''
    value: 13e3
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [320, 228.0]
    rotation: 0
    state: enabled
- name: transition_width2
  id: variable
  parameters:
    comment: ''
    value: 13e3
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [560, 252.0]
    rotation: 0
    state: enabled
- name: import_0
  id: import
  parameters:
    alias: ''
    comment: ''
    imports: import scipy
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [40, 212.0]
    rotation: 0
    state: true
- name: import_0_0
  id: import
  parameters:
    alias: ''
    comment: ''
    imports: from scipy import signal
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [40, 252.0]
    rotation: 0
    state: true
- name: import_0_0_0
  id: import
  parameters:
    alias: ''
    comment: ''
    imports: import matplotlib.pyplot as plt
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [40, 292.0]
    rotation: 0
    state: true
- name: import_1
  id: import
  parameters:
    alias: ''
    comment: 'Modules for plotting

      the frequency response'
    imports: import numpy as np
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [40, 332.0]
    rotation: 0
    state: true
- name: snippet_0
  id: snippet
  parameters:
    alias: ''
    code: '# Saving the taps1 to a file----------------------------------------


      filename = "taps1.txt"

      file1 = open(filename,"w") #open file to write

      file1.writelines(''{0}''.format(self.taps1))

      file1.close() #to change file access modes


      # Saving the taps2 to a file----------------------------------------


      filename = "taps2.txt"

      file1 = open(filename,"w") #open file to write

      file1.writelines(''{0}''.format(self.taps2))

      file1.close() #to change file access modes


      # Plotting the frequency responses


      w1, h1 = signal.freqz(self.taps1)

      w2, h2 = signal.freqz(self.taps2)


      fig1, ax1 = plt.subplots() # freq axis

      ax1.set_title(''Digital filter frequency response'')


      ax1.plot(w1, 20 * np.log10(abs(h1)), ''-b'')

      ax1.plot(w2, 20 * np.log10(abs(h2)), ''-g'')

      ax1.legend([''Taps1'', ''Taps2''])


      ax1.set_ylabel(''Amplitude [dB]'', color=''k'')

      ax1.set_xlabel(''Frequency [rad/sample]'')


      ax2 = ax1.twinx() # angle axis


      angles1 = np.unwrap(np.angle(h1))

      angles2 = np.unwrap(np.angle(h2))


      if self.plotphase: ax2.plot(w1, angles1, ''-c'')

      if self.plotphase: ax2.plot(w2, angles2, ''-y'')

      if self.plotphase: ax2.legend([''Taps1'', ''Taps2''])


      ax2.set_ylabel(''Phase (radians)'', color=''k'')



      ax2.grid()

      ax2.axis(''tight'')


      plt.show()'
    comment: ''
    priority: '1'
    section: main_after_start
  states:
    bus_sink: false
    bus_source: false
    bus_structure: null
    coordinate: [352, 52.0]
    rotation: 0
    state: true
connections: []

metadata:
  file_format: 1
  grc_version: 3.10.2.0
